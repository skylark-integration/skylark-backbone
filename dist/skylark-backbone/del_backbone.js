/**
 * skylark-backbone - A version of backbone that ported to running on skylarkjs.
 * @author 
 * @version v0.9.0
 * @link 
 * @license MIT
 */
define(["skylark-langx/skylark","skylark-langx/langx","skylark-utils-dom/query","skylark-utils-dom/plugins","skylark-underscore/underscore","./models"],function(t,e,n,i,s,r){e.klass;var o=e.mixin,u=e.Evented,a=e.Stateful,l=i.Plugin.inherit({_construct:function(t,n){if(e.isHtmlNode(n)){t=n=t}e.isHtmlNode(t)?this.el=t:this.el=null,n&&e.mixin(this,n),this.cid||(this.cid=e.uniqueId("w")),this._ensureElement(),this.init()},tagName:"div",$:function(t){return this.$el.find(t)},render:function(){return this},remove:function(){return this._removeElement(),this.unlistenTo(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=widgets.$(t),this.el=this.$el[0]},delegateEvents:function(t){if(t||(t=e.result(this,"events")),!t)return this;for(var n in this.undelegateEvents(),t){var i=t[n];if(e.isFunction(i)||(i=this[i]),i){var s=n.match(E);this.delegate(s[1],s[2],e.proxy(i,this))}}return this},delegate:function(t,e,n){return this.$el.on(t+".delegateEvents"+this.uid,e,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.uid),this},undelegate:function(t,e,n){return this.$el.off(t+".delegateEvents"+this.uid,e,n),this},_createElement:function(t,e){return noder.createElement(t,e)},_ensureElement:function(){if(this.el)this.setElement(e.result(this,"el"));else{var t=e.mixin({},e.result(this,"attributes"));this.id&&(t.id=e.result(this,"id")),this.className&&(t.class=e.result(this,"className")),this.setElement(this._createElement(e.result(this,"tagName"),t)),this._setAttributes(t)}},_setAttributes:function(t){this.$el.attr(t)}}),c=root.Backbone,h=Array.prototype.slice;Backbone.VERSION="1.2.3",Backbone.$=n,Backbone.noConflict=function(){return root.Backbone=c,this},Backbone.emulateHTTP=r.emulateHTTP,Backbone.emulateJSON=r.emulateJSON;var f=function(t,e,n){s.each(e,function(e,i){s[i]&&(t.prototype[i]=function(t,e,n){switch(t){case 1:return function(){return s[e](this[n])};case 2:return function(t){return s[e](this[n],t)};case 3:return function(t,i){return s[e](this[n],d(t,this),i)};case 4:return function(t,i,r){return s[e](this[n],d(t,this),i,r)};default:return function(){var t=h.call(arguments);return t.unshift(this[n]),s[e].apply(s,t)}}}(e,i,n))})},d=function(t,e){return s.isFunction(t)?t:s.isObject(t)&&!e._isModel(t)?p(t):s.isString(t)?function(e){return e.get(t)}:t},p=function(t){var e=s.matches(t);return function(t){return e(t.attributes)}},m={on:function(t,e,n){var i=function(){var n=h.call(arguments,1);"all"==t&&n.unshift(arguments[0].type),e.apply(this,n)};return i._=e,this.overrided(t,i,n)},once:function(t,e,n){return this.one(t,e,n)},bind:function(t,e,n){return this.on(t,e,n)},unbind:function(t,e,n){return this.off(t,e,n)},stopListening:function(t,e,n){return this.unlistenTo(t,e,n)}},y=u.inherit(m).prototype,v=Backbone.Events={bind:y.bind,listenTo:y.listenTo,listenToOnce:y.listenToOnce,off:y.off,on:y.on,once:y.once,stopListening:y.stopListening,trigger:y.trigger,unbind:y.unbind,unlistenTo:y.unlistenTo};s.extend(Backbone,v);var k=Backbone.Model=r.Entity.inherit(o({_construct:function(t,e){a.prototype.init.apply(this,arguments),this.initialize.apply(this,arguments)}},m));k.partial({initialize:function(){},init:function(){},escape:function(t){return s.escape(this.get(t))},matches:function(t){return!!s.iteratee(t,this)(this.attributes)}});f(k,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes");var b=Backbone.Collection=r.Collection.inherit(o({constructor:function(t,e){r.Collection.prototype.init.apply(this,arguments),this.initialize.apply(this,arguments)}},m));b._constructor=function(t,e){e||(e={}),e.model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,s.extend({silent:!0},e))},b.partial({init:function(){},initialize:function(){}}),Object.defineProperty(b.prototype,"model",{get(){return this.entity},set(t){this.entity=t}}),Object.defineProperty(b.prototype,"models",{get(){return this.entities},set(t){this.entities=t}}),b.prototype.modelId=b.prototype.entityId,b.prototype._isModel=b.prototype._isEntity;f(b,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models");var g=Backbone.View=l.inherit(o({constructor:function(t){l.prototype.init.apply(this,arguments),this.initialize.apply(this,arguments)}},m)),E=/^(\S+)\s*(.*)$/;g.partial({initialize:function(){}}),Object.defineProperty(Backbone,"sync",{get:()=>r.sync,set(t){r.sync=t}}),Backbone.ajax=function(){return Backbone.$.ajax.apply(Backbone.$,arguments)},k.extend=b.extend=g.extend=Backbone.extend=function(t,e){t.constructor=this._constructor;var n=this.inherit(t);return s.extend(n,e),n};return Backbone});
//# sourceMappingURL=sourcemaps/del_backbone.js.map
